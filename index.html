<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VUDG: <b>V</b>ideo <b>U</b>nderstanding <b>D</b>ataset <b>G</b>eneration</title>
  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <!-- SheetJS 库 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.4/xlsx.full.min.js"></script>
  <style>
    .qa-container {
      max-height: 200px;
      overflow-y: auto;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      background-color: #f9f9f9;
      margin-top: 10px;
    }
    .qa-item {
      margin-bottom: 15px;
    }
    .qa-item p {
      margin: 5px 0;
    }
    .qa-item p.question {
      font-weight: bold;
      color: #3273dc;
    }
    .qa-item p.answer {
      color: #363636;
    }
    .video-qa-pair {
      margin-bottom: 20px;
    }
    .benchmark-table {
      margin-top: 20px;
    }
    .benchmark-table table {
      width: 100%;
      border-collapse: collapse;
    }
    .benchmark-table th, .benchmark-table td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    .benchmark-table th {
      background-color: #f5f5f5;
      font-weight: bold;
    }
    .benchmark-table tr:nth-child(even) {
      background-color: #f9f9f9;
    }
  </style>
</head>
<body>

<!-- 主标题和作者信息 -->
<section class="section">
  <div class="container">
    <h1 class="title is-1 has-text-centered">VUDG: <b>V</b>ideo <b>U</b>nderstanding <b>D</b>ataset <b>G</b>eneration</h1>
    <div class="content has-text-centered">
      <p class="is-size-5 publication-authors">
        <span class="author-block">
          AAA<sup>1</sup>,
        </span>
        <span class="author-block">
          BBB<sup>2</sup>,
        </span>
        <span class="author-block">
          CCC<sup>1</sup>
        </span>
      </p>
      <p class="is-size-5 publication-authors">
        <span class="author-block"><sup>1</sup>XXX,</span>
        <span class="author-block"><sup>2</sup>YYY</span>
      </p>
    </div>

    <!-- Arxiv 链接 -->
    <div class="column has-text-centered">
      <div class="publication-links">
        <span class="link-block">
          <a href="https://arxiv.org/abs/XXXX.XXXXX"
             class="external-link button is-normal is-rounded is-dark">
            <span class="icon">
              <i class="ai ai-arxiv"></i>
            </span>
            <span>arXiv</span>
          </a>
        </span>
        <span class="link-block">
          <a href="https://github.com/your-repo"
             class="external-link button is-normal is-rounded is-dark">
            <span class="icon">
              <i class="fab fa-github"></i>
            </span>
            <span>Code</span>
          </a>
        </span>
        <span class="link-block">
          <a href="https://huggingface.co/datasets/your-dataset"
             class="external-link button is-normal is-rounded is-dark">
            <span class="icon">
              <i class="fas fa-database"></i>
            </span>
            <span>Dataset</span>
          </a>
        </span>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="container">
    <h2 class="title is-2">Abstract</h2>
    <div class="content">
      <p style="font-size: 1.5rem;">
        Video understanding has made remarkable progress in recent years, largely driven by advances in deep models and the availability of large-scale annotated 
        datasets. However, existing works typically ignore the inherent domain shifts encountered in real-world video applications, leaving domain generalization 
        (DG) in video understanding underexplored. Hence, we propose <strong>V</strong>ideo <strong>U</strong>nderstanding <strong>D</strong>omain <strong>G</strong>eneralization 
        (<strong>VUDG</strong>), a novel dataset designed specifically for evaluating the DG performance in video understanding. VUDG contains videos from 11 distinct domains 
        that cover three types of domain shifts, and maintains semantic similarity across different domains to ensure fair and meaningful evaluation. We propose a multi-expert 
        progressive annotation framework to annotate each video with both multiple-choice and open-ended question-answer pairs. Extensive experiments on 9 representative 
        large video-language models (LVLMs) and several traditional video question answering methods show that most models (including state-of-the-art LVLMs) suffer 
        performance degradation under domain shifts. These results highlight the challenges posed by VUDG and the difference in the robustness of current models to data 
        distribution shifts. We believe VUDG provides a valuable resource for prompting future research in domain generalization video understanding.
 
      </p>
    </div>
  </div>
</section>

<!-- 标题 1: 数据集简介 -->
<section class="section">
  <div class="container">
    <h2 class="title is-2">Dataset Introduction</h2>
    <div class="content">
      <p style="font-size: 1.5rem;">
        The training set comprises 6,337 video clips and 31,685 QA pairs. The testing set contains 1,532 video clips and 4,703 QA pairs.
      </p>
    </div>
    <!-- 图片展示 -->
    <div class="content">
      <!-- 下方两张图：左右排列 -->
      <div class="columns">
        <div class="column is-full">
          <img src="./static/images/teaser.png" alt="Image 2" style="width: 100%;">
        </div>
      </div>
      
      <!-- 第一张图：横向贯穿左右，带翻页功能 -->
      <div class="columns">
        <div class="column is-full">
          <div class="carousel">
            <!-- 翻页按钮 -->
            <div class="carousel-navigation">
              <button class="carousel-button prev" onclick="prevSlide()">&#10094;</button>
              <button class="carousel-button next" onclick="nextSlide()">&#10095;</button>
            </div>
      
            <!-- 图片容器 -->
            <div class="carousel-slides">
              <div class="carousel-slide active">
                <img src="./static/images/domain.png" alt="Categories Page 1" style="width: 100%;">
              </div>
              <div class="carousel-slide">
                <img src="./static/images/duration.png" alt="Categories Page 2" style="width: 100%;">
              </div>
            </div>
            
            <!-- 示例原点 -->
            <div class="carousel-dots" style="text-align: center; margin-top: 10px;">
              <span class="carousel-dot active" onclick="goToSlide(0)"></span>
              <span class="carousel-dot" onclick="goToSlide(1)"></span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 翻页功能样式 -->
      <style>
        .carousel {
          position: relative;
          width: 100%;
          overflow: hidden;
        }
        .carousel-slides {
          display: flex;
          transition: transform 0.5s ease;
        }
        .carousel-slide {
          min-width: 100%;
          box-sizing: border-box;
        }
        .carousel-slide img {
          width: 100%;
          display: block;
        }
        .carousel-navigation {
          position: absolute;
          top: 50%;
          width: 100%;
          display: flex;
          justify-content: space-between;
          transform: translateY(-50%);
          z-index: 10; /* 确保按钮在图片上方 */
        }
        
        .carousel-button {
          background-color: rgba(0, 0, 0, 0.5);
          color: white;
          border: none;
          padding: 10px;
          cursor: pointer;
          font-size: 18px;
          z-index: 10; /* 确保按钮在图片上方 */
        }
        .carousel-button:hover {
          background-color: rgba(0, 0, 0, 0.8);
        }
        .carousel-dots {
          margin-top: 10px;
        }
        .carousel-dot {
          display: inline-block;
          width: 10px;
          height: 10px;
          background-color: #bbb;
          border-radius: 50%;
          margin: 0 5px;
          cursor: pointer;
        }
        .carousel-dot.active {
          background-color: #3273dc;
        }
      </style>
      
      <!-- 翻页功能脚本 -->
      <script>
        let currentSlide = 0;
      
        function showSlide(index) {
          const slides = document.querySelectorAll('.carousel-slide');
          const dots = document.querySelectorAll('.carousel-dot');
      
          if (index >= slides.length) currentSlide = 0;
          if (index < 0) currentSlide = slides.length - 1;
      
          // 更新图片位置
          document.querySelector('.carousel-slides').style.transform = `translateX(-${currentSlide * 100}%)`;
      
          // 更新原点状态
          dots.forEach((dot, i) => {
            dot.classList.toggle('active', i === currentSlide);
          });
        }
      
        function nextSlide() {
          currentSlide++;
          showSlide(currentSlide);
        }
      
        function prevSlide() {
          currentSlide--;
          showSlide(currentSlide);
        }
      
        function goToSlide(index) {
          currentSlide = index;
          showSlide(currentSlide);
        }
      </script>
    </div>
  </div>
</section>

<!-- 标题 2: 数据集示例 -->
<section class="section">
  <div class="container">
    <h2 class="title is-2">Dataset Examples</h2>
    <div class="content">
      <p>
        Select a category from the dropdown menu and click "Preview" to view the corresponding videos and QA pairs.
      </p>

      <!-- 选项栏和预览按钮 -->
      <div class="field has-addons">
        <div class="control">
          <div class="select">
            <select id="category-select">
              <option value="cartoon" selected>Cartoon</option>
              <option value="egocentric_video">Egocentric Video</option>
              <option value="foggy">Foggy</option>
              <option value="game">Game</option>
              <option value="movie_tv_show">Movie/TV Show</option>
              <option value="night">Night</option>
              <option value="rainy">Rainy</option>
              <option value="shakey">Shakey</option>
              <option value="snowy">Snowy</option>
              <option value="surveillance">Surveillance</option>
              <option value="virtual">Virtual</option>
            </select>
          </div>
        </div>
        <div class="control">
          <button id="preview-button" class="button is-primary">Preview</button>
        </div>
      </div>

      <!-- 2x2 网格布局 -->
      <div class="columns is-multiline" id="video-qa-grid" style="margin-top: 20px;">
        <!-- 视频 1 和 QA 1 -->
        <div class="column is-half video-qa-pair">
          <video id="video-1" controls width="100%">
            Your browser does not support the video tag.
          </video>
          <div class="qa-container" id="qa-1"></div>
        </div>

        <!-- 视频 2 和 QA 2 -->
        <div class="column is-half video-qa-pair">
          <video id="video-2" controls width="100%">
            Your browser does not support the video tag.
          </video>
          <div class="qa-container" id="qa-2"></div>
        </div>

        <!-- 视频 3 和 QA 3 -->
        <div class="column is-half video-qa-pair">
          <video id="video-3" controls width="100%">
            Your browser does not support the video tag.
          </video>
          <div class="qa-container" id="qa-3"></div>
        </div>

        <!-- 视频 4 和 QA 4 -->
        <div class="column is-half video-qa-pair">
          <video id="video-4" controls width="100%">
            Your browser does not support the video tag.
          </video>
          <div class="qa-container" id="qa-4"></div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- 标题 3: Benchmark 测试结果 -->
<section class="section">
  <div class="container">
    <h2 class="title is-2">Leaderboard</h2>
  <!-- 图片展示 -->
    <div class="content">
      <!-- 下方两张图：左右排列 -->
      <div class="columns">
        <div class="column is-full" style="text-align: center;">
          <img src="./static/images/table_d_mul.png" alt="Image 3" style="width: 100%;">
        </div>
      </div>
    </div>
  </div>
</section>

<!-- BibTeX 引用 -->
<section class="section">
  <div class="container is-max-desktop content">
    <h2 class="title">Citation</h2>
    <pre><code>@misc{2025VUDG,
      title={VUDG: Video Understanding Dataset Generation}, 
      author={AAA and BBB and CCC and DDD},
      year={2025},
      eprint={1111.222222},
      archivePrefix={arXiv}
    }</code></pre>
  </div>
</section>

<!-- 声明 -->
<footer class="footer">
  <div class="content has-text-centered">
    <p>
      This website is adapted from <a href="https://nerfies.github.io/" target="_blank">Nerfies</a>. 
      The dataset provided here is for academic research purposes only and may not be used for commercial purposes.
    </p>
  </div>
</footer>

<!-- JavaScript 实现交互 -->
<script>
  // 加载指定栏目的视频和 QA 对
  async function loadCategory(category) {
    for (let i = 1; i <= 4; i++) {
      const videoPath = `./static/videos/${category}_${i}.mp4?${Math.random()}`; // 避免缓存
      console.log(`Video ${i} Path:`, videoPath); // 调试信息

      const videoElement = document.getElementById(`video-${i}`);
      videoElement.innerHTML = `<source src="${videoPath}" type="video/mp4">`;
      videoElement.load();

      // 加载 QA 对
      const qaContainer = document.getElementById(`qa-${i}`);
      qaContainer.innerHTML = ''; // 清空之前的内容

      const qaPath = `./static/QAs/${category}_${i}.txt`;
      console.log(`QA ${i} Path:`, qaPath); // 调试信息

      try {
        const response = await fetch(qaPath);
        if (!response.ok) throw new Error('File not found');
        const text = await response.text();
        const qaPairs = text.split('\n').filter(line => line.trim() !== ''); // 按行分割并过滤空行

        // 解析并添加 QA 对
        for (let j = 0; j < qaPairs.length; j += 2) {
          const question = qaPairs[j].replace('Q:', '').trim();
          const answer = qaPairs[j + 1].replace('A:', '').trim();
          qaContainer.innerHTML += `
            <div class="qa-item">
              <p class="question">Q: ${question}</p>
              <p class="answer">A: ${answer}</p>
            </div>
          `;
        }
      } catch (error) {
        console.error(`Failed to load QA for Video ${i}:`, error);
        qaContainer.innerHTML = `<p class="has-text-danger">Failed to load QA for Video ${i}.</p>`;
      }
    }
  }

  // 页面加载时自动加载 cartoon
  window.addEventListener('load', () => {
    loadCategory('cartoon'); // 默认加载 cartoon
  });

  // 切换栏目时重新加载
  document.getElementById('preview-button').addEventListener('click', () => {
    const selectedCategory = document.getElementById('category-select').value;
    loadCategory(selectedCategory); // 加载选中的栏目
  });
  
  // 加载 Benchmark 测试结果
  async function loadBenchmarkResults() {
    const benchmarkTable = document.getElementById('benchmark-table');
    const filePath = './static/bench_score.xlsx';

    try {
      const response = await fetch(filePath);
      if (!response.ok) throw new Error('File not found');
      const arrayBuffer = await response.arrayBuffer();
      const workbook = XLSX.read(arrayBuffer, { type: 'array' });
      const firstSheetName = workbook.SheetNames[0];
      const worksheet = workbook.Sheets[firstSheetName];
      const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });

      // 生成表格
      let tableHtml = '<table>';
      jsonData.forEach((row, rowIndex) => {
        tableHtml += '<tr>';
        row.forEach((cell, cellIndex) => {
          if (rowIndex === 0) {
            tableHtml += `<th>${cell}</th>`; // 表头
          } else {
            tableHtml += `<td>${cell}</td>`; // 表格内容
          }
        });
        tableHtml += '</tr>';
      });
      tableHtml += '</table>';

      benchmarkTable.innerHTML = tableHtml;
    } catch (error) {
      console.error('Failed to load benchmark results:', error);
      benchmarkTable.innerHTML = `<p class="has-text-danger">Failed to load benchmark results.</p>`;
    }
  }

  // 页面加载时加载 Benchmark 测试结果
  window.addEventListener('load', loadBenchmarkResults);
</script>

</body>
</html>
